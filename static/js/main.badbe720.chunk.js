(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i,o,l,j=n(1),d=n.n(j),u=n(77),b=n.n(u),m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},O=n(24),h=n(12),g=n(8),x=(n(96),n(97),n(44)),p=n.n(x),f=n(145),v=n(140),N=n(15),k=n(36),I=Object(k.a)(a||(a=Object(N.a)(["\n  mutation signup($email: String!, $name: String!) {\n    signup(email: $email, name: $name) {\n      ok\n      err\n    }\n  }\n"]))),w=Object(k.a)(c||(c=Object(N.a)(["\n  query getUserById($userId: String!) {\n    getUserById(userId: $userId) {\n      _id\n      name\n      email\n    }\n  }\n"]))),S=n(28),y=n(29),U=new(n(142).a),P=function(){function e(){Object(S.a)(this,e)}return Object(y.a)(e,null,[{key:"checkIfUserIdIsInLocalStorage",value:function(){return!!localStorage.getItem("userId")}},{key:"setUserIdInLocalStorage",value:function(e){localStorage.setItem("userId",e),U.next(1)}},{key:"removeUserIdFromLocalStorage",value:function(){localStorage.removeItem("userId")}},{key:"getUserIdFromLocalStorage",value:function(){return localStorage.getItem("userId")}},{key:"subscribeToChanges",value:function(){return U}}]),e}(),T=n(2),$=Object(j.createContext)({user:void 0,loginUser:function(){},logoutUser:function(){},signupUser:function(){}}),C=function(e){var t=e.children,n=Object(j.useState)(),a=Object(g.a)(n,2),c=a[0],r=a[1],s=Object(h.f)(),i=Object(f.a)(I),o=Object(g.a)(i,1)[0],l=Object(v.a)(w,{variables:{userId:P.getUserIdFromLocalStorage()}}),d=l.data,u=l.loading,b=l.refetch,m=l.error;Object(j.useEffect)((function(){P.getUserIdFromLocalStorage()||s.push("/login")}),[]),Object(j.useEffect)((function(){!d||u||m||r(d.getUserById)}),[d]);return Object(T.jsx)($.Provider,{value:{user:c,loginUser:function(e){P.setUserIdInLocalStorage(e),b()},logoutUser:function(){P.removeUserIdFromLocalStorage(),window.location.reload()},signupUser:function(e,t){return o({variables:{email:e,name:t}}).then((function(e){return e}))}},children:t})},F=function(e){var t=e.userProjects,n=e.activeProject,a=e.setActiveProject,c=Object(j.useContext)($),r=c.user,s=c.logoutUser,i=Object(j.useRef)(null),o=Object(j.useRef)(null);return Object(j.useEffect)((function(){p.a.Sidenav.init(i.current),p.a.Modal.init(o.current)}),[]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("nav",{children:Object(T.jsxs)("div",{className:"nav-wrapper",children:[Object(T.jsx)("a",{className:"brand-logo",children:null===n||void 0===n?void 0:n.name}),Object(T.jsx)("a",{children:Object(T.jsx)("i",{className:"material-icons sidenav-trigger","data-target":"slide-out",children:"menu"})})]})}),Object(T.jsxs)("div",{id:"slide-out",className:"sidebar-container sidenav",ref:i,children:[Object(T.jsxs)("div",{className:"sidebar-top-bar",children:[Object(T.jsx)("img",{src:"avatarIcon.png",alt:"iconAvatar",className:"sidebar-avatar"}),r&&Object(T.jsx)("p",{children:r.name})]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("ul",{className:"collection",children:[Object(T.jsxs)("h5",{className:"sidebar-options-header ",children:[Object(T.jsx)("i",{className:"material-icons",children:"folder_open"}),"Projects"]}),t?t.map((function(e){return Object(T.jsx)("li",{className:"collection-item",onClick:function(){return a(e)},children:e.name},e._id)})):Object(T.jsx)("li",{children:"Loading"}),Object(T.jsxs)("button",{className:"btn modal-trigger btn-flat sidebar-share","data-target":"modal1",children:[" ",Object(T.jsx)("i",{className:"material-icons",children:"share"})," Share this project!"]})]}),Object(T.jsx)(O.b,{to:"/newProject",children:Object(T.jsxs)("button",{className:"btn modal-trigger btn-flat sidebar-share",children:[" ",Object(T.jsx)("i",{className:"material-icons",children:"add"})," New Project"]})}),Object(T.jsx)("div",{className:"row logout",children:Object(T.jsxs)("button",{className:"btn btn-flat",onClick:function(){return s()},children:[Object(T.jsx)("i",{className:"material-icons ",children:"logout"})," Logout"]})}),Object(T.jsxs)("div",{id:"modal1",className:"modal",ref:o,children:[Object(T.jsxs)("div",{className:"modal-content ",children:[Object(T.jsx)("h5",{children:"Share this code"}),n&&Object(T.jsx)("p",{children:n.shareCode})]}),Object(T.jsx)("div",{className:"modal-footer",children:Object(T.jsx)("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat",children:"Agree"})})]})]})]})]})},_=n(146),L=Object(k.a)(r||(r=Object(N.a)(["\n  mutation markTaskAsCompleted($projectId: String!, $taskId: String!) {\n    markTaskAsCompleted(projectId: $projectId, taskId: $taskId) {\n      ok\n      err\n    }\n  }\n"]))),E=Object(k.a)(s||(s=Object(N.a)(["\n  query getAllUserProjects($userId: String!) {\n    getAllUserProjects(userId: $userId) {\n      _id\n      name\n      participants\n      tasks {\n        _id\n        name\n        completed\n      }\n      shareCode\n    }\n  }\n"]))),A=Object(k.a)(i||(i=Object(N.a)(["\n  subscription changesInTask {\n    changesInTask\n  }\n"]))),q=(n(107),n(25)),B=n(27),J=(n(109),n(141)),D=Object(k.a)(o||(o=Object(N.a)(["\n  query getUserByEmail($email: String!) {\n    getUserByEmail(email: $email) {\n      _id\n      name\n      email\n    }\n  }\n"]))),R=function(e){var t=e.error;return Object(T.jsx)("h5",{className:"card-panel red lighten-2",children:t})},H=Object(k.a)(l||(l=Object(N.a)(["\n  mutation newTask($projectId: String!, $taskName: String!) {\n    newTask(projectId: $projectId, taskName: $taskName) {\n      ok\n      err\n    }\n  }\n"]))),M=n(126),W=n(10),Y=n.n(W),z=n(22),G=(n(110),n(143)),K=n(16),Q=n(60),V=n(128),X=n(82),Z=n(30);n(111).config();var ee,te,ne=function(){function e(){Object(S.a)(this,e)}return Object(y.a)(e,null,[{key:"getUriForHttpServer",value:function(){return"http://".concat("67.205.177.38",":").concat(this.getPort())}},{key:"getUriForWsServer",value:function(){return"ws://".concat("67.205.177.38",":").concat(this.getPort(),"/").concat("projects")||!1}},{key:"getPort",value:function(){return"4000"}}]),e}(),ae=new X.a({uri:ne.getUriForWsServer(),options:{reconnect:!0}}),ce=new G.a({uri:ne.getUriForHttpServer()}),re=Object(K.split)((function(e){var t=e.query,n=Object(Z.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),ae,ce),se=new Q.a({link:re,cache:new V.a}),ie=(n(125),Object(k.a)(ee||(ee=Object(N.a)(["\n  mutation newProject($projectName: String!, $userId: String!) {\n    newProject(projectName: $projectName, userId: $userId) {\n      ok\n      err\n    }\n  }\n"])))),oe=Object(k.a)(te||(te=Object(N.a)(["\n  mutation addToProject($shareCode: Int!, $userId: String!) {\n    joinToExistingProject(shareCode: $shareCode, userId: $userId) {\n      ok\n      err\n    }\n  }\n"]))),le=n(84),je=n.n(le);b.a.render(Object(T.jsx)(M.a,{client:se,children:Object(T.jsx)(O.a,{children:Object(T.jsx)(C,{children:Object(T.jsx)(d.a.StrictMode,{children:Object(T.jsxs)(h.c,{children:[Object(T.jsx)(h.a,{exact:!0,path:"/",component:function(){var e,t,n=Object(h.f)(),a=Object(f.a)(L),c=Object(g.a)(a,1)[0],r=Object(j.useState)(),s=Object(g.a)(r,2),i=s[0],o=s[1],l=Object(j.useState)(),d=Object(g.a)(l,2),u=d[0],b=d[1],m=Object(_.a)(A).data,O=Object(v.a)(E,{variables:{userId:P.getUserIdFromLocalStorage()},onError:function(){n.push("/error")}});Object(j.useEffect)((function(){!O.data||O.error||O.loading||(o(O.data.getAllUserProjects[0]),b(O.data.getAllUserProjects))}),[O.data]);var x=function(e){c({variables:{projectId:null===i||void 0===i?void 0:i._id,taskId:e}})};return Object(j.useEffect)((function(){O.refetch()}),[m]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(F,{userProjects:u,activeProject:i,setActiveProject:o}),Object(T.jsxs)("ul",{className:"collection tasklist",children:[i?null===(e=i.tasks)||void 0===e?void 0:e.map((function(e){if(!e.completed)return Object(T.jsxs)("li",{className:"collection-item",onClick:function(){return x(e._id)},children:[Object(T.jsx)("i",{className:"material-icons",children:"check_box_outline_blank"}),e.name]},e.name)})):Object(T.jsx)("h4",{children:"No tasks yet!"}),i?null===(t=i.tasks)||void 0===t?void 0:t.map((function(e){if(e.completed)return Object(T.jsxs)("li",{className:"collection-item finished",onClick:function(){return x(e._id)},children:[Object(T.jsx)("i",{className:"material-icons",children:"check_box"}),e.name]},e.name)})):Object(T.jsx)("h4",{children:"No tasks yet!"})]}),Object(T.jsx)("div",{className:"container-button",children:Object(T.jsx)("button",{className:"material-icons add-task",onClick:function(){return n.push("/newTask/".concat(null===i||void 0===i?void 0:i.name,"/").concat(null===i||void 0===i?void 0:i._id))},children:"add_circle"})})]})}}),Object(T.jsx)(h.a,{path:"/login",component:function(){var e=Object(B.a)(),t=e.register,n=e.handleSubmit,a=Object(j.useState)(null),c=Object(g.a)(a,2),r=c[0],s=c[1],i=Object(h.f)(),o=Object(J.a)(D),l=Object(g.a)(o,2),d=l[0],u=l[1],b=u.data,m=u.loading,x=u.error;return Object(j.useEffect)((function(){!b||x||m||(P.setUserIdInLocalStorage(b.getUserByEmail._id),i.push("/"),window.location.reload()),b||!x||m||s("There was an error")}),[b]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("nav",{children:Object(T.jsx)("div",{className:"nav-wrapper",children:Object(T.jsx)("p",{className:"brand-logo",children:"Taskia"})})}),Object(T.jsxs)("div",{className:"center-align login-container",children:[r&&Object(T.jsx)(R,{error:r}),Object(T.jsx)("h3",{children:"You're not logged!"}),Object(T.jsx)("h4",{children:"Just type your email"}),Object(T.jsxs)("form",{onSubmit:n((function(e){s(null),d({variables:{email:e.email}})})),children:[Object(T.jsx)("input",Object(q.a)({type:"email",className:"email",id:"",placeholder:"example@mail.com"},t("email",{required:!0}))),Object(T.jsx)("button",{className:"waves-effect waves-green btn-large",children:"Login"}),Object(T.jsx)("div",{children:Object(T.jsxs)("div",{children:["Or if you dont have account you can"," ",Object(T.jsx)(O.b,{to:"/signup",children:"signup "})," to Taskia"]})})]})]})]})}}),Object(T.jsx)(h.a,{path:"/signup",component:function(){var e=Object(B.a)(),t=e.register,n=e.handleSubmit,a=Object(j.useState)(null),c=Object(g.a)(a,2),r=c[0],s=c[1],i=Object(j.useContext)($).signupUser,o=function(){var e=Object(z.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.email,t.name);case 2:(n=e.sent).data.signup.ok||s(n.data.signup.err);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("nav",{children:Object(T.jsx)("div",{className:"nav-wrapper",children:Object(T.jsx)("p",{className:"brand-logo",children:"Taskia"})})}),Object(T.jsxs)("div",{className:"center-align login-container",children:[Object(T.jsx)("h3",{children:"Signup now!"}),Object(T.jsx)("h4",{children:"It's that easy, no password needed"}),r&&Object(T.jsx)(R,{error:r}),Object(T.jsxs)("form",{onSubmit:n(o),children:[Object(T.jsx)("input",Object(q.a)({type:"text",className:"email",id:"",placeholder:"John Doe"},t("name",{required:!0}))),Object(T.jsx)("input",Object(q.a)({type:"email",className:"email",id:"",placeholder:"example@mail.com"},t("email",{required:!0}))),Object(T.jsx)("button",{className:"waves-effect waves-green btn-large",children:"Signup"})]})]})]})}}),Object(T.jsx)(h.a,{path:"/newTask/:projectName/:projectId",component:function(){var e=Object(h.f)(),t=Object(B.a)(),n=t.handleSubmit,a=t.register,c=Object(j.useState)(null),r=Object(g.a)(c,2),s=r[0],i=r[1],o=Object(f.a)(H),l=Object(g.a)(o,1)[0],d=Object(h.g)(),u=d.projectName,b=d.projectId;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("nav",{children:Object(T.jsx)("div",{className:"nav-wrapper",children:Object(T.jsx)("p",{className:"brand-logo",children:"Taskia"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("form",{className:"col s12",onSubmit:n((function(t){i(null),l({variables:{projectId:b,taskName:t.taskName}}).then((function(t){t.data.newTask.ok?(e.push("/"),window.location.reload()):i(t.data.newTask.err)}),(function(){i("There was an error")}))})),children:[Object(T.jsx)("div",{className:"input-field col s12",children:s&&Object(T.jsx)(R,{error:s})}),Object(T.jsx)("div",{className:"row center",children:Object(T.jsxs)("h5",{children:["Add task to ",Object(T.jsx)("em",{children:u})," project"]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"input-field col s12",children:Object(T.jsx)("input",Object(q.a)({type:"text",className:"validate",placeholder:"New task..."},a("taskName",{required:!0})))})}),Object(T.jsx)("div",{className:"new-task-container",children:Object(T.jsx)("button",{className:"add-task",children:"Add task!"})})]})})]})}}),Object(T.jsx)(h.a,{path:"/newProject",component:function(){var e=Object(j.useContext)($).user,t=Object(j.useRef)(null),n=Object(h.f)(),a=Object(B.a)(),c=a.handleSubmit,r=a.register,s=Object(j.useState)(null),i=Object(g.a)(s,2),o=i[0],l=i[1],d=Object(f.a)(ie),u=Object(g.a)(d,1)[0],b=Object(f.a)(oe),m=Object(g.a)(b,1)[0];Object(j.useEffect)((function(){p.a.FormSelect.init(t.current)}),[]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("nav",{children:Object(T.jsx)("div",{className:"nav-wrapper",children:Object(T.jsx)("p",{className:"brand-logo",children:"Taskia"})})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("form",{className:"col s12",onSubmit:c((function(t){l(null),u({variables:{projectName:t.projectName,userId:null===e||void 0===e?void 0:e._id}}).then((function(e){e.data.newProject.ok?(n.push("/"),window.location.reload()):l(e.data.newProject.err)}),(function(){l("There was an error")}))})),children:[Object(T.jsx)("div",{className:"input-field col s12",children:o&&Object(T.jsx)("h5",{className:"card-panel red lighten-2",children:o})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"input-field col s12",children:Object(T.jsx)("input",Object(q.a)({type:"text",className:"validate",placeholder:"New project..."},r("projectName")))}),Object(T.jsx)("div",{className:"col s12"})]}),Object(T.jsx)("div",{className:"new-task-container",children:Object(T.jsx)("button",{className:"add-task",children:"Add project!"})})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("form",{className:"col s12",onSubmit:c((function(t){var a=parseInt(t.shareCode);m({variables:{shareCode:a,userId:null===e||void 0===e?void 0:e._id}}).then((function(e){e.data.joinToExistingProject.ok?n.push("/"):l(e.data.joinToExistingProject.err||"Something went wrong")}))})),children:[Object(T.jsx)("h5",{children:"Or join to an existing project"}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"input-field col s12",children:Object(T.jsx)("input",Object(q.a)({type:"number",className:"validate",placeholder:"New project..."},r("shareCode")))}),Object(T.jsx)("div",{className:"col s12"})]}),Object(T.jsx)("div",{className:"new-task-container",children:Object(T.jsx)("button",{className:"add-task",type:"submit",children:"Join project!"})})]})})]})}}),Object(T.jsx)(h.a,{path:"/error",component:function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("img",{src:"LogoTaskia.png",alt:"Logo of Taskia",className:je.a.taskiaImage}),Object(T.jsx)("h4",{className:"center-align",children:"There was an unrecoverable error, try again later."})]})}})]})})})})}),document.getElementById("root")),m()},84:function(e,t,n){e.exports={taskiaImage:"error_taskiaImage__1w2Et"}},96:function(e,t,n){},97:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.badbe720.chunk.js.map